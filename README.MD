# üåü FastAPI Subscription Service üåü

**Este √© um servi√ßo de gerenciamento de assinaturas utilizando FastAPI e MongoDB.**  
Ele permite a cria√ß√£o, atualiza√ß√£o, recupera√ß√£o e exclus√£o de assinaturas. O projeto √© uma API RESTful simples, onde os dados das assinaturas s√£o armazenados em um banco de dados MongoDB.

---

## üöÄ Funcionalidades

- **Criar nova assinatura**  
  M√©todo: `POST /new-subscription` e `POST /webhooks/new-subscription`
  
- **Obter detalhes de uma assinatura**  
  M√©todo: `GET /subscription/{subscription_id}`
  
- **Excluir uma assinatura**  
  M√©todo: `DELETE /subscription/{subscription_id}`
  
- **Atualizar uma assinatura**  
  M√©todo: `PUT /subscription/{subscription_id}`
  
- **Listar todas as assinaturas**  
  M√©todo: `GET /subscriptions`

---

## üõ†Ô∏è Tecnologias

- **FastAPI** - Framework moderno e de alto desempenho para APIs com Python 3.7+.
- **MongoDB** - Banco de dados NoSQL usado para armazenar as assinaturas.
- **Pydantic** - Para valida√ß√£o de dados e serializa√ß√£o/deserializa√ß√£o de modelos.
- **BSON** - Para manipula√ß√£o do tipo `ObjectId` do MongoDB.

---

## üìã Pr√©-requisitos

- Python 3.7 ou superior
- MongoDB (instale e configure o MongoDB em sua m√°quina local ou use uma inst√¢ncia na nuvem)

---

## ‚öôÔ∏è Instala√ß√£o

### 1. Clone o reposit√≥rio

```bash
git clone https://github.com/seu-usuario/fastapi-subscription-service.git
cd fastapi-subscription-service
2. Crie um ambiente virtual (opcional, mas recomendado)
bash
Copiar c√≥digo
python3 -m venv venv
source venv/bin/activate  # No Windows use: venv\Scripts\activate
3. Instale as depend√™ncias
bash
Copiar c√≥digo
pip install -r requirements.txt
4. Configure a conex√£o com o MongoDB
No arquivo app/db.py, configure a conex√£o com o banco de dados. Exemplo de configura√ß√£o:

python
Copiar c√≥digo
from pymongo import MongoClient

def get_db():
    client = MongoClient('mongodb://localhost:27017/')  # URL do MongoDB
    return client["subscription_db"]  # Nome do banco de dados
5. Execute o servidor FastAPI
bash
Copiar c√≥digo
uvicorn main:app --reload
Agora, a API estar√° dispon√≠vel em http://127.0.0.1:8000.
Voc√™ pode testar a documenta√ß√£o interativa da API acessando http://127.0.0.1:8000/docs.

üìù Endpoints
1. Criar uma nova assinatura
M√©todo: POST /new-subscription
Descri√ß√£o: Cria uma nova assinatura no MongoDB.
Exemplo de requisi√ß√£o:

json
Copiar c√≥digo
{
  "username": "john_doe",
  "monthly_fee": 29.99,
  "start_date": "2024-11-29T10:00:00"
}
Resposta de sucesso:

json
Copiar c√≥digo
{
  "message": "Subscription for john_doe received and saved!",
  "id": "60d5f9f1d3b0d3e2f8d1b3f3"
}
2. Receber uma requisi√ß√£o webhook para nova assinatura
M√©todo: POST /webhooks/new-subscription
Descri√ß√£o: Recebe um webhook para criar uma nova assinatura.
(Mesma estrutura do endpoint anterior)

3. Obter detalhes de uma assinatura
M√©todo: GET /subscription/{subscription_id}
Descri√ß√£o: Recupera os detalhes de uma assinatura pelo ID.
Par√¢metros:

subscription_id (ID da assinatura no MongoDB).
Exemplo de resposta:

json
Copiar c√≥digo
{
  "_id": "60d5f9f1d3b0d3e2f8d1b3f3",
  "username": "john_doe",
  "monthly_fee": 29.99,
  "start_date": "2024-11-29T10:00:00"
}
4. Excluir uma assinatura
M√©todo: DELETE /subscription/{subscription_id}
Descri√ß√£o: Exclui uma assinatura pelo ID.
Exemplo de resposta:

json
Copiar c√≥digo
{
  "message": "Subscription of john_doe with the (ID 60d5f9f1d3b0d3e2f8d1b3f3) has been deleted."
}
5. Atualizar uma assinatura
M√©todo: PUT /subscription/{subscription_id}
Descri√ß√£o: Atualiza as informa√ß√µes de uma assinatura.
Exemplo de requisi√ß√£o:

json
Copiar c√≥digo
{
  "username": "john_doe_updated",
  "monthly_fee": 34.99,
  "start_date": "2024-11-29T12:00:00"
}
Exemplo de resposta:

json
Copiar c√≥digo
{
  "message": "Subscription for john_doe_updated has been updated."
}
6. Listar todas as assinaturas
M√©todo: GET /subscriptions
Descri√ß√£o: Retorna uma lista de todas as assinaturas no banco de dados.
Exemplo de resposta:

json
Copiar c√≥digo
[
  {
    "_id": "60d5f9f1d3b0d3e2f8d1b3f3",
    "username": "john_doe",
    "monthly_fee": 29.99,
    "start_date": "2024-11-29T10:00:00"
  },
  {
    "_id": "60d5f9f1d3b0d3e2f8d1b3f4",
    "username": "jane_doe",
    "monthly_fee": 19.99,
    "start_date": "2024-10-15T10:00:00"
  }
]
ü§ù Contribuindo
Se voc√™ gostaria de contribuir para este projeto, fique √† vontade para abrir um pull request.

Fa√ßa um fork deste reposit√≥rio.
Crie uma branch para sua nova funcionalidade:
git checkout -b minha-nova-funcionalidade
Realize as altera√ß√µes desejadas.
Envie suas altera√ß√µes para o seu reposit√≥rio:
git push origin minha-nova-funcionalidade
Abra um pull request para este reposit√≥rio.
üìú Licen√ßa
Este projeto est√° licenciado sob a MIT License.